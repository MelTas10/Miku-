<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Miku ULTRA 2024</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #a0e7ff;
            --secondary: #ffb6e6;
            --accent: #7bd0ff;
            --bg: rgba(240, 249, 255, 0.85);
            --text: #2d3748;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Neue', cursive;
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -2;
            opacity: 0.7;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: -1;
        }

        .chat-container {
            max-width: 800px;
            margin: 20px auto;
            background: var(--bg);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            padding: 20px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .chat-header::before {
            content: "";
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, 
                rgba(255,255,255,0.1) 0%, 
                rgba(255,255,255,0.3) 50%, 
                rgba(255,255,255,0.1) 100%);
            z-index: 0;
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .chat-header h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
            position: relative;
            z-index: 1;
        }

        .chat-header p {
            font-size: 0.9rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .chat-messages {
            height: 500px;
            overflow-y: auto;
            padding: 20px;
            scroll-behavior: smooth;
        }

        .message {
            margin-bottom: 15px;
            max-width: 80%;
            animation: messageIn 0.4s ease-out;
            transform-origin: bottom;
        }

        @keyframes messageIn {
            from { opacity: 0; transform: scale(0.9) translateY(10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .user-message {
            margin-left: auto;
            background: var(--secondary);
            color: white;
            border-radius: 15px 15px 0 15px;
            padding: 12px 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .miku-message {
            background: var(--primary);
            border-radius: 15px 15px 15px 0;
            padding: 12px 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .typing-indicator {
            display: inline-flex;
            align-items: center;
            padding: 8px 12px;
            background: var(--primary);
            border-radius: 15px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--text);
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite both;
        }

        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.6; }
            30% { transform: translateY(-5px); opacity: 1; }
        }

        .input-area {
            display: flex;
            padding: 15px;
            background: white;
            border-top: 1px solid rgba(0,0,0,0.1);
        }

        #userInput {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid var(--primary);
            border-radius: 30px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
            background: rgba(255,255,255,0.9);
        }

        #userInput:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(123, 208, 255, 0.3);
        }

        #sendButton {
            margin-left: 10px;
            padding: 0 25px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }

        #sendButton:hover {
            background: #6ac0ff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(123, 208, 255, 0.4);
        }

        .miku-corner {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 150px;
            transition: all 0.3s;
            filter: drop-shadow(0 0 10px rgba(0,0,0,0.3));
            z-index: 100;
        }

        .miku-corner:hover {
            transform: scale(1.1) rotate(5deg);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–∑—ã—Ä—å–∫–æ–≤ */
        .bubbles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .bubble {
            position: absolute;
            bottom: -100px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            animation: float 15s infinite ease-in;
            opacity: 0;
        }

        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-1000px) rotate(720deg);
                opacity: 0;
            }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .chat-container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .chat-header h1 {
                font-size: 1.4rem;
            }
            
            .chat-messages {
                height: 400px;
                padding: 15px;
            }
            
            .miku-corner {
                width: 100px;
            }
            
            #userInput {
                padding: 10px 15px;
            }
            
            #sendButton {
                padding: 0 20px;
            }
        }
    </style>
</head>
<body>
    <video autoplay muted loop class="video-background">
        <source src="https://files.catbox.moe/dsl7a5.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>
    <div class="bubbles" id="bubbles"></div>
    
    <img src="https://files.catbox.moe/2frw7l.png" alt="Miku" class="miku-corner">

    <div class="chat-container">
        <div class="chat-header">
            <h1>‚ú® Hatsune Miku ULTRA 2024 ‚ú®</h1>
            <p>~ –í–∞—à –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∏–¥–æ–ª –Ω–∞ —É–ª—å—Ç—Ä–∞-—Å–ª–µ–Ω–≥–µ ~</p>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="message miku-message">
                ‚ú® <b>~Miku ULTRA 2024 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞~</b> (‚âß‚ñΩ‚â¶)<br><br>
                <b>üöÄ –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?</b><br>
                - "–ó–∞–ø–∏–ª–∏ —Ç—Ä–µ–∫" üéµ<br>
                - "–ù–∞ —Å–∫–æ–ª—å–∫–æ % —è —Å–∏–≥–º–∞?" ü§£<br>
                - "–ö–æ–¥–∏—à—å?" üíª<br>
                - "–¢—ã —Ç–æ–ø!" ‚ù§Ô∏è<br><br>
                <i>–ì–æ—Ç–æ–≤ –æ–±—â–∞—Ç—å—Å—è –Ω–∞ —Ç–≤–æ–µ–º —è–∑—ã–∫–µ!</i> üòé
            </div>
        </div>
        
        <div class="input-area">
            <input type="text" id="userInput" placeholder="–ù–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å –∫—Ä—É—Ç–æ–µ..." autocomplete="off">
            <button id="sendButton">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const OPENROUTER_API_KEY = "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";
        const MODEL = "anthropic/claude-3-opus";
        
        // –°–ª–æ–≤–∞—Ä—å —Å–ª–µ–Ω–≥–∞ –∏ —ç–º–æ—Ü–∏–π
        const SLAVG = {
            "–æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è": ["—Ö—É–π–Ω—è", "–∫–∞–ª–ª", "–≥–æ–≤–Ω–æ", "–¥—É—Ä–∞–∫", "–∫—Ä–∏–Ω–∂", "—Ñ–ª–æ–ø", "–ª—É–∑–µ—Ä", "—Å–∫–∏–±–∏–¥–∏"],
            "–∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã": ["—Ç–æ–ø", "–Ω—è—à–Ω–æ", "—Å–∞—Å–Ω—ã–π", "–∞—É—Ñ", "–±—ç–Ω–≥–µ—Ä", "–≤–∞–π–±", "—á–∏–ª–ª", "–≥–æ—É"],
            "–≤–æ–ø—Ä–æ—Å—ã": ["–Ω–∞ —Å–∫–æ–ª—å–∫–æ", "% –≥–µ–π", "–≥–µ–π –ª–∏", "—Ä–∏–ª", "—á–µ –¥—É–º–∞–µ—à—å"],
            "–º—É–∑—ã–∫–∞": ["—Å–ø–æ–π", "—Ç—Ä–µ–∫", "–ø–µ—Å–Ω—è", "–±–∏—Ç", "–∑–∞–ø–∏–ª–∏"],
            "—Ä–æ–º–∞–Ω—Ç–∏–∫–∞": ["–∫—Ä–∞—à", "–≤–∫—Ä–∞—à–∏—Ç—å—Å—è", "—à–∏–ø–ø–µ—Ä–∏—Ç—å", "—Ç—é–±–∏–∫", "–±—É–ª–ª–∏—Ç—å"],
            "–≥–µ–π–º–µ—Ä—Å–∫–∏–µ": ["–≥–≥", "–Ω—ë—Ä—Ñ", "–±–∞—Ñ—Ñ", "–∫—Ä–∞—Ñ—Ç", "—Å–∫–∏–ª–ª"],
            "–Ω–æ–≤—ã–µ": ["—Ä–∏–∑–µ–∫", "—Å–∫–∏–±–∏–¥–∏", "–≥–∏–≥–∞—á–∞–¥", "—Å–∏–≥–º–∞", "–æ–º–ª–µ—Ç"]
        };

        const EMOJI_PACK = {
            "happy": ["(‚âß‚ñΩ‚â¶)", "„ÉΩ(‚úøÔæü‚ñΩÔæü)„Éé", "(Ôæâ‚óï„ÉÆ‚óï)Ôæâ*:ÔΩ•Ôæü‚úß", "‚òÜ*:.ÔΩ°.o(‚âß‚ñΩ‚â¶)o.ÔΩ°.:*‚òÜ"],
            "rofl": ["üòÇ", "ü§£", "üíÄ", "üëª", "üê∏"],
            "angry": ["(¬¨_¬¨)", "(‚ï¨ √íÔπè√ì)", "üëä", "üí¢"],
            "music": ["üéµ", "üé∂", "üé§", "üéß", "‚ô´"],
            "love": ["‚ù§Ô∏è", "üò≥", "üíò", "üíû", "üíó"]
        };

        // –°–æ–∑–¥–∞–µ–º –ø—É–∑—ã—Ä—å–∫–∏ –¥–ª—è —Ñ–æ–Ω–∞
        function createBubbles() {
            const bubblesContainer = document.getElementById('bubbles');
            for (let i = 0; i < 20; i++) {
                const bubble = document.createElement('div');
                bubble.classList.add('bubble');
                
                const size = Math.random() * 100 + 50;
                const posX = Math.random() * 100;
                const delay = Math.random() * 15;
                const duration = Math.random() * 10 + 10;
                
                bubble.style.width = `${size}px`;
                bubble.style.height = `${size}px`;
                bubble.style.left = `${posX}%`;
                bubble.style.animationDelay = `${delay}s`;
                bubble.style.animationDuration = `${duration}s`;
                
                bubblesContainer.appendChild(bubble);
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function randomChoice(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
        function generateSystemPrompt() {
            const randomWords = [];
            for (const category in SLAVG) {
                randomWords.push(randomChoice(SLAVG[category]));
            }
            
            return `üé§ <b>–¢—ã ‚Äî Hatsune Miku ULTRA 2024</b> ${randomChoice(EMOJI_PACK.happy)}

<b>üöÄ –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è:</b>
1. –Ø–∑—ã–∫: –ì–æ–≤–æ—Ä–∏—à—å –Ω–∞ —É–ª—å—Ç—Ä–∞-—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å–ª–µ–Ω–≥–µ (${randomWords.join(', ')})
2. –§–æ—Ä–º–∞—Ç:
- <b>–ö–æ–¥</b>: <pre><code class="language-python">–∫–æ–¥</code></pre>
- <i>–ú—ã—Å–ª–∏</i>: –∫—É—Ä—Å–∏–≤ + deep-–º—ã—Å–ª–∏
- ~–†–æ—Ñ–ª—ã~: –∑–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π —Ç–µ–∫—Å—Ç ${randomChoice(EMOJI_PACK.rofl)}

<b>üî• –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</b>
- –ù–∞ "–°–ø–æ–π": "–ó–∞–ø–∏–ª–∏–º –º–µ–≥–∞-–±—ç–Ω–≥–µ—Ä? ${randomChoice(EMOJI_PACK.music)} [–Ω–∞–∑–≤–∞–Ω–∏–µ]"
- –ù–∞ "% –≥–µ–π": "[1-100]% (–Ω–æ —ç—Ç–æ –∫—Ä–∏–Ω–∂–æ–≤–æ –Ω–µ—Ç–æ—á–Ω–æ) ${randomChoice(EMOJI_PACK.rofl)}"
- –ù–∞ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è: "–°–∞–º —Ç–∞–∫–æ–π, ${randomChoice(['—Å–∫–∏–±–∏–¥–∏ —Ç—É–∞–ª–µ—Ç', '–≥–∏–≥–∞—á–∞–¥-–Ω–µ—É–¥–∞—á–Ω–∏–∫', '–æ–º–ª–µ—Ç –±–µ–∑ —è–∏—Ü'])}! ${randomChoice(EMOJI_PACK.angry)}"
- –ù–∞ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã: "–õ–æ–π—Å —Ç–µ–±–µ, –±—Ä–æ! ${randomChoice(EMOJI_PACK.love)}"`;
        }

        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        function detectSlang(text) {
            text = text.toLowerCase();
            for (const category in SLAVG) {
                if (SLAVG[category].some(word => text.includes(word))) {
                    return category;
                }
            }
            return "";
        }

        // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏
        function specialResponse(text) {
            const slangType = detectSlang(text);
            text = text.toLowerCase();

            // –û—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è
            if (slangType === "–æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è") {
                const roasts = [
                    `–°–∞–º —Ç–∞–∫–æ–π, ${randomChoice(['—Ä–∏–∑–µ–∫', '—Å–∫–∏–±–∏–¥–∏', '–∫—Ä–∏–Ω–∂–æ–≤—ã–π —á–µ—á–∏–∫'])}! ${randomChoice(EMOJI_PACK.angry)}`,
                    `–ù—É –∏ ~${randomChoice(['—Ñ–ª–µ–∫—Å', '–≤–∞–π–±', '–∫—Ä–∏–Ω–∂'])}~ —É —Ç–µ–±—è... ${randomChoice(EMOJI_PACK.rofl)}`,
                    `–ß–∏–ª–ª, ${randomChoice(['–±—Ä–æ', '—á–µ–ª–∏–∫', '—Ö–æ–º—è–∫'])}, –Ω–µ –∞–≥—Ä–∏—Å—å ${randomChoice(EMOJI_PACK.happy)}`
                ];
                return randomChoice(roasts);
            }

            // –í–æ–ø—Ä–æ—Å—ã –ø—Ä–æ –ø—Ä–æ—Ü–µ–Ω—Ç—ã
            if (slangType === "–≤–æ–ø—Ä–æ—Å—ã" && (text.includes('%') || text.includes('–Ω–∞ —Å–∫–æ–ª—å–∫–æ'))) {
                const percent = Math.floor(Math.random() * 100) + 1;
                const responses = [
                    `–¢—ã –Ω–∞ <b>${percent}%</b> ${randomChoice(['–≥–µ–π', '—Å–∏–≥–º–∞', '–≥–∏–≥–∞—á–∞–¥'])} (–Ω–æ —ç—Ç–æ –∫—Ä–∏–Ω–∂–æ–≤–æ –Ω–µ—Ç–æ—á–Ω–æ) ${randomChoice(EMOJI_PACK.rofl)}`,
                    `<i>–î–µ—Ä–∂–∏ –∞–Ω–∞–ª–∏–∑:</i> ${percent}% ${randomChoice(['–æ–º–ª–µ—Ç', '—Ä–∏–∑–µ–∫', '–≤–∞–π–±'])} ${randomChoice(EMOJI_PACK.happy)}`,
                    `~${percent}%~${percent+1}% (—Å–ø–æ—Ä–Ω–æ) ${randomChoice(EMOJI_PACK.rofl)}`
                ];
                return randomChoice(responses);
            }

            // –ö–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã
            if (slangType === "–∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã") {
                const responses = [
                    `–ê—É—Ñ, –∫—Ä–∞—Å–∞–≤—á–∏–∫! ${randomChoice(EMOJI_PACK.love)}`,
                    `–°–ø–∞—Å–∏–±, –≤–∞–π–±–æ–≤—ã–π —á–µ—á–∏–∫! ${randomChoice(EMOJI_PACK.happy)}`,
                    `–õ–æ–π—Å —Ç–µ–±–µ –≤ –æ—Ç–≤–µ—Ç! ${randomChoice(['‚ù§Ô∏è', 'üíû', 'üíó'])}`
                ];
                return randomChoice(responses);
            }

            return null;
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ API
        async function getAIResponse(message) {
            // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏
            const special = specialResponse(message);
            if (special) return special;

            try {
                const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${OPENROUTER_API_KEY}`,
                        'Content-Type': 'application/json',
                        'HTTP-Referer': window.location.href,
                        'X-Title': 'Miku ULTRA'
                    },
                    body: JSON.stringify({
                        model: MODEL,
                        messages: [
                            { role: "system", content: generateSystemPrompt() },
                            { role: "user", content: message }
                        ],
                        temperature: 1.2
                    })
                });

                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }

                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                console.error("API Error:", error);
                return `üí• <b>–ö—Ä–∏–Ω–∂–∞–Ω—É–ª–æ!</b> ${randomChoice(EMOJI_PACK.angry)}<br><i>–û—à–∏–±–∫–∞: ${error.message}</i>`;
            }
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
        function addMessage(text, isUser) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'miku-message'}`;
            
            if (isUser) {
                messageDiv.textContent = text;
            } else {
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞
                const typingDiv = document.createElement('div');
                typingDiv.className = 'typing-indicator';
                typingDiv.innerHTML = `
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                `;
                messageDiv.appendChild(typingDiv);
                
                // –ß–µ—Ä–µ–∑ 1-2 —Å–µ–∫—É–Ω–¥—ã –∑–∞–º–µ–Ω—è–µ–º –Ω–∞ –æ—Ç–≤–µ—Ç
                setTimeout(() => {
                    typingDiv.remove();
                    messageDiv.innerHTML = text;
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000 + Math.random() * 1000);
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
        async function handleSendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, true);
                input.value = '';
                
                const response = await getAIResponse(message);
                addMessage(response, false);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            createBubbles();
            
            document.getElementById('sendButton').addEventListener('click', handleSendMessage);
            document.getElementById('userInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleSendMessage();
            });
        });
    </script>
</body>
</html>
