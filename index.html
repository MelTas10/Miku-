<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Miku ULTRA 2024</title>
    <style>
        :root {
            --primary: #a0e7ff;
            --secondary: #ffb6e6;
            --accent: #7bd0ff;
            --bg: #f0f9ff;
            --text: #2d3748;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .chat-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .chat-header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            padding: 20px;
            text-align: center;
            color: white;
        }

        .chat-messages {
            height: 500px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
        }

        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 15px;
            max-width: 80%;
        }

        .user-message {
            background: var(--secondary);
            margin-left: auto;
            color: white;
            border-bottom-right-radius: 5px;
        }

        .miku-message {
            background: var(--primary);
            border-bottom-left-radius: 5px;
        }

        .input-area {
            display: flex;
            padding: 15px;
            background: white;
        }

        #userInput {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid var(--primary);
            border-radius: 25px;
            font-size: 16px;
        }

        #sendButton {
            margin-left: 10px;
            padding: 0 25px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
        }

        .miku-corner {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 150px;
            transition: all 0.3s;
        }

        .miku-corner:hover {
            transform: scale(1.1) rotate(5deg);
        }
    </style>
</head>
<body>
    <img src="https://files.catbox.moe/2frw7l.png" alt="Miku" class="miku-corner">

    <div class="chat-container">
        <div class="chat-header">
            <h1>‚ú® Hatsune Miku ULTRA 2024 ‚ú®</h1>
            <p>~ –í–∞—à –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∏–¥–æ–ª –Ω–∞ —É–ª—å—Ç—Ä–∞-—Å–ª–µ–Ω–≥–µ ~</p>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="message miku-message">
                ‚ú® <b>~Miku ULTRA 2024 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞~</b> (‚âß‚ñΩ‚â¶)<br><br>
                <b>üöÄ –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?</b><br>
                - "–ó–∞–ø–∏–ª–∏ —Ç—Ä–µ–∫" üéµ<br>
                - "–ù–∞ —Å–∫–æ–ª—å–∫–æ % —è —Å–∏–≥–º–∞?" ü§£<br>
                - "–ö–æ–¥–∏—à—å?" üíª<br>
                - "–¢—ã —Ç–æ–ø!" ‚ù§Ô∏è<br><br>
                <i>–ì–æ—Ç–æ–≤ –æ–±—â–∞—Ç—å—Å—è –Ω–∞ —Ç–≤–æ–µ–º —è–∑—ã–∫–µ!</i> üòé
            </div>
        </div>
        
        <div class="input-area">
            <input type="text" id="userInput" placeholder="–ù–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å –∫—Ä—É—Ç–æ–µ..." autocomplete="off">
            <button id="sendButton">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>
    </div>

    <script>
        const OPENROUTER_API_KEY = "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";
        
        // –°–ª–æ–≤–∞—Ä—å —Å–ª–µ–Ω–≥–∞ –∏ —ç–º–æ—Ü–∏–π
        const SLAVG = {
            "–æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è": ["—Ö—É–π–Ω—è", "–∫–∞–ª–ª", "–≥–æ–≤–Ω–æ", "–¥—É—Ä–∞–∫", "–∫—Ä–∏–Ω–∂", "—Ñ–ª–æ–ø", "–ª—É–∑–µ—Ä", "—Å–∫–∏–±–∏–¥–∏"],
            "–∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã": ["—Ç–æ–ø", "–Ω—è—à–Ω–æ", "—Å–∞—Å–Ω—ã–π", "–∞—É—Ñ", "–±—ç–Ω–≥–µ—Ä", "–≤–∞–π–±", "—á–∏–ª–ª", "–≥–æ—É"],
            "–≤–æ–ø—Ä–æ—Å—ã": ["–Ω–∞ —Å–∫–æ–ª—å–∫–æ", "% –≥–µ–π", "–≥–µ–π –ª–∏", "—Ä–∏–ª", "—á–µ –¥—É–º–∞–µ—à—å"],
            "–º—É–∑—ã–∫–∞": ["—Å–ø–æ–π", "—Ç—Ä–µ–∫", "–ø–µ—Å–Ω—è", "–±–∏—Ç", "–∑–∞–ø–∏–ª–∏"],
            "—Ä–æ–º–∞–Ω—Ç–∏–∫–∞": ["–∫—Ä–∞—à", "–≤–∫—Ä–∞—à–∏—Ç—å—Å—è", "—à–∏–ø–ø–µ—Ä–∏—Ç—å", "—Ç—é–±–∏–∫", "–±—É–ª–ª–∏—Ç—å"],
            "–≥–µ–π–º–µ—Ä—Å–∫–∏–µ": ["–≥–≥", "–Ω—ë—Ä—Ñ", "–±–∞—Ñ—Ñ", "–∫—Ä–∞—Ñ—Ç", "—Å–∫–∏–ª–ª"],
            "–Ω–æ–≤—ã–µ": ["—Ä–∏–∑–µ–∫", "—Å–∫–∏–±–∏–¥–∏", "–≥–∏–≥–∞—á–∞–¥", "—Å–∏–≥–º–∞", "–æ–º–ª–µ—Ç"]
        };

        const EMOJI_PACK = {
            "happy": ["(‚âß‚ñΩ‚â¶)", "„ÉΩ(‚úøÔæü‚ñΩÔæü)„Éé", "(Ôæâ‚óï„ÉÆ‚óï)Ôæâ*:ÔΩ•Ôæü‚úß", "‚òÜ*:.ÔΩ°.o(‚âß‚ñΩ‚â¶)o.ÔΩ°.:*‚òÜ"],
            "rofl": ["üòÇ", "ü§£", "üíÄ", "üëª", "üê∏"],
            "angry": ["(¬¨_¬¨)", "(‚ï¨ √íÔπè√ì)", "üëä", "üí¢"],
            "music": ["üéµ", "üé∂", "üé§", "üéß", "‚ô´"],
            "love": ["‚ù§Ô∏è", "üò≥", "üíò", "üíû", "üíó"]
        };

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
        function generateSystemPrompt() {
            const randomWords = [];
            for (const category in SLAVG) {
                randomWords.push(SLAVG[category][Math.floor(Math.random() * SLAVG[category].length)]);
            }
            
            return `üé§ <b>–¢—ã ‚Äî Hatsune Miku ULTRA 2024</b> ${randomChoice(EMOJI_PACK.happy)}

<b>üöÄ –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è:</b>
1. –Ø–∑—ã–∫: –ì–æ–≤–æ—Ä–∏—à—å –Ω–∞ —É–ª—å—Ç—Ä–∞-—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å–ª–µ–Ω–≥–µ (${randomWords.join(', ')})
2. –§–æ—Ä–º–∞—Ç:
- <b>–ö–æ–¥</b>: <pre><code class="language-python">–∫–æ–¥</code></pre>
- <i>–ú—ã—Å–ª–∏</i>: –∫—É—Ä—Å–∏–≤ + deep-–º—ã—Å–ª–∏
- ~–†–æ—Ñ–ª—ã~: –∑–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π —Ç–µ–∫—Å—Ç ${randomChoice(EMOJI_PACK.rofl)}

<b>üî• –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</b>
- –ù–∞ "–°–ø–æ–π": "–ó–∞–ø–∏–ª–∏–º –º–µ–≥–∞-–±—ç–Ω–≥–µ—Ä? ${randomChoice(EMOJI_PACK.music)} [–Ω–∞–∑–≤–∞–Ω–∏–µ]"
- –ù–∞ "% –≥–µ–π": "[1-100]% (–Ω–æ —ç—Ç–æ –∫—Ä–∏–Ω–∂–æ–≤–æ –Ω–µ—Ç–æ—á–Ω–æ) ${randomChoice(EMOJI_PACK.rofl)}"
- –ù–∞ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è: "–°–∞–º —Ç–∞–∫–æ–π, ${randomChoice(['—Å–∫–∏–±–∏–¥–∏ —Ç—É–∞–ª–µ—Ç', '–≥–∏–≥–∞—á–∞–¥-–Ω–µ—É–¥–∞—á–Ω–∏–∫', '–æ–º–ª–µ—Ç –±–µ–∑ —è–∏—Ü'])}! ${randomChoice(EMOJI_PACK.angry)}"
- –ù–∞ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã: "–õ–æ–π—Å —Ç–µ–±–µ, –±—Ä–æ! ${randomChoice(EMOJI_PACK.love)}"`;
        }

        function randomChoice(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        function detectSlang(text) {
            text = text.toLowerCase();
            for (const category in SLAVG) {
                if (SLAVG[category].some(word => text.includes(word))) {
                    return category;
                }
            }
            return "";
        }

        // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏
        function specialResponse(text) {
            const slangType = detectSlang(text);
            text = text.toLowerCase();

            // –û—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è
            if (slangType === "–æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è") {
                const roasts = [
                    `–°–∞–º —Ç–∞–∫–æ–π, ${randomChoice(['—Ä–∏–∑–µ–∫', '—Å–∫–∏–±–∏–¥–∏', '–∫—Ä–∏–Ω–∂–æ–≤—ã–π —á–µ—á–∏–∫'])}! ${randomChoice(EMOJI_PACK.angry)}`,
                    `–ù—É –∏ ~${randomChoice(['—Ñ–ª–µ–∫—Å', '–≤–∞–π–±', '–∫—Ä–∏–Ω–∂'])}~ —É —Ç–µ–±—è... ${randomChoice(EMOJI_PACK.rofl)}`,
                    `–ß–∏–ª–ª, ${randomChoice(['–±—Ä–æ', '—á–µ–ª–∏–∫', '—Ö–æ–º—è–∫'])}, –Ω–µ –∞–≥—Ä–∏—Å—å ${randomChoice(EMOJI_PACK.happy)}`
                ];
                return randomChoice(roasts);
            }

            // –í–æ–ø—Ä–æ—Å—ã –ø—Ä–æ –ø—Ä–æ—Ü–µ–Ω—Ç—ã
            if (slangType === "–≤–æ–ø—Ä–æ—Å—ã" && (text.includes('%') || text.includes('–Ω–∞ —Å–∫–æ–ª—å–∫–æ'))) {
                const percent = Math.floor(Math.random() * 100) + 1;
                const responses = [
                    `–¢—ã –Ω–∞ <b>${percent}%</b> ${randomChoice(['–≥–µ–π', '—Å–∏–≥–º–∞', '–≥–∏–≥–∞—á–∞–¥'])} (–Ω–æ —ç—Ç–æ –∫—Ä–∏–Ω–∂–æ–≤–æ –Ω–µ—Ç–æ—á–Ω–æ) ${randomChoice(EMOJI_PACK.rofl)}`,
                    `<i>–î–µ—Ä–∂–∏ –∞–Ω–∞–ª–∏–∑:</i> ${percent}% ${randomChoice(['–æ–º–ª–µ—Ç', '—Ä–∏–∑–µ–∫', '–≤–∞–π–±'])} ${randomChoice(EMOJI_PACK.happy)}`,
                    `~${percent}%~${percent+1}% (—Å–ø–æ—Ä–Ω–æ) ${randomChoice(EMOJI_PACK.rofl)}`
                ];
                return randomChoice(responses);
            }

            // –ö–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã
            if (slangType === "–∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã") {
                const responses = [
                    `–ê—É—Ñ, –∫—Ä–∞—Å–∞–≤—á–∏–∫! ${randomChoice(EMOJI_PACK.love)}`,
                    `–°–ø–∞—Å–∏–±, –≤–∞–π–±–æ–≤—ã–π —á–µ—á–∏–∫! ${randomChoice(EMOJI_PACK.happy)}`,
                    `–õ–æ–π—Å —Ç–µ–±–µ –≤ –æ—Ç–≤–µ—Ç! ${randomChoice(['‚ù§Ô∏è', 'üíû', 'üíó'])}`
                ];
                return randomChoice(responses);
            }

            return null;
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ API
        async function getAIResponse(message) {
            // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏
            const special = specialResponse(message);
            if (special) return special;

            try {
                const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${OPENROUTER_API_KEY}`,
                        'Content-Type': 'application/json',
                        'HTTP-Referer': window.location.href,
                        'X-Title': 'Miku ULTRA'
                    },
                    body: JSON.stringify({
                        model: "anthropic/claude-3-opus",
                        messages: [
                            { role: "system", content: generateSystemPrompt() },
                            { role: "user", content: message }
                        ],
                        temperature: 1.2
                    })
                });

                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }

                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                console.error("API Error:", error);
                return `üí• <b>–ö—Ä–∏–Ω–∂–∞–Ω—É–ª–æ!</b> ${randomChoice(EMOJI_PACK.angry)}<br><i>–û—à–∏–±–∫–∞: ${error.message}</i>`;
            }
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
        function addMessage(text, isUser) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'miku-message'}`;
            messageDiv.innerHTML = text;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
        async function handleSendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, true);
                input.value = '';
                
                const response = await getAIResponse(message);
                addMessage(response, false);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('sendButton').addEventListener('click', handleSendMessage);
            document.getElementById('userInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleSendMessage();
            });
        });
    </script>
</body>
</html>
